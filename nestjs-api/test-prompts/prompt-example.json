{
  "prompt": "Please analyze this code:\n\nconst express = require('express');\nconst app = express();\nconst port = 3000;\n\nconst { MongoClient } = require('mongodb');\nlet db;\nasync function connectDB() {\n  const client = await MongoClient.connect('mongodb://localhost:27017');\n  db = client.db('testdb');\n  return db;\n}\n\nclass UserService {\n  constructor() {\n    this.users = [];\n  }\n\n  async createUser(user) {\n    this.users.push(user);\n    if (db) {\n      await db.collection('users').insertOne(user);\n    }\n    console.log('Usuário criado:', user);\n  }\n\n  async getAllUsers() {\n    if (db) {\n      return await db.collection('users').find().toArray();\n    }\n    return this.users;\n  }\n\n  async sendEmail(user) {\n    console.log(`Enviando email para ${user.email}`);\n  }\n}\n\napp.get('/users', async (req, res) => {\n  const service = new UserService();\n  const users = await service.getAllUsers();\n  res.json(users);\n});\n\napp.post('/users', express.json(), async (req, res) => {\n  const service = new UserService();\n  await service.createUser(req.body);\n  res.send('Usuário criado!');\n});\n\nfunction calculateSum() {\n  let sum = 0;\n  for (let i = 0; i < 1000000; i++) {\n    sum += i;\n  }\n  return sum;\n}\n\nclass EventEmitter {\n  constructor() {\n    this.events = {};\n  }\n  on(event, listener) {\n    if (!this.events[event]) this.events[event] = [];\n    this.events[event].push(listener);\n  }\n  emit(event, data) {\n    if (this.events[event]) {\n      this.events[event].forEach(fn => fn(data));\n    }\n  }\n}\n\nconst emitter = new EventEmitter();\nemitter.on('user_created', (user) => {\n  console.log('Novo usuário criado:', user);\n});\n\napp.listen(port, async () => {\n  await connectDB();\n  console.log(`Servidor rodando em http://localhost:${port}`);\n});"
}